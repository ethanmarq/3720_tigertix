{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\unkno\\\\OneDrive\\\\Documents\\\\GitHub\\\\3720_tigertix\\\\frontend\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useCallback } from 'react';\nimport './App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [events, setEvents] = useState([]);\n  const [message, setMessage] = useState(''); // For screen reader announcements\n\n  // useCallback to memoize the function so it's not recreated on every render\n  const fetchEvents = useCallback(() => {\n    // The frontend now fetches from the client service on port 6001\n    fetch('http://localhost:6001/api/events').then(res => res.json()).then(data => setEvents(data)).catch(err => {\n      console.error(\"Failed to fetch events:\", err);\n      setMessage(\"Error: Could not load events from the server.\");\n    });\n  }, []);\n\n  // Fetch events on initial component mount\n  useEffect(() => {\n    fetchEvents();\n  }, [fetchEvents]);\n  const buyTicket = (eventId, eventName) => {\n    fetch(`http://localhost:6001/api/events/${eventId}/purchase`, {\n      method: 'POST'\n    }).then(res => {\n      if (!res.ok) {\n        // If the server responds with an error (e.g., 400 for no tickets)\n        // we convert it to JSON to read the error message\n        return res.json().then(err => Promise.reject(err));\n      }\n      return res.json();\n    }).then(data => {\n      // Announce success to screen readers via the live region\n      const successMsg = `Ticket purchased successfully for ${eventName}.`;\n      setMessage(successMsg);\n      alert(successMsg); // Visual confirmation for sighted users\n      fetchEvents(); // Refresh the list of events to show the new ticket count\n    }).catch(err => {\n      console.error('Purchase error:', err);\n      // Announce failure and show an alert\n      const errorMsg = `Failed to purchase ticket for ${eventName}. Reason: ${err.error || 'Server error'}`;\n      setMessage(errorMsg);\n      alert(errorMsg);\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      children: /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Clemson Campus Events\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        role: \"status\",\n        \"aria-live\": \"polite\",\n        className: \"sr-only\",\n        children: message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: events.map(event => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [event.name, \" - \", new Date(event.date).toLocaleDateString(), \" - \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: event.tickets\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 90\n          }, this), \" tickets available\", /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => buyTicket(event.id, event.name)\n            // Descriptive label for screen readers\n            ,\n            \"aria-label\": `Buy one ticket for ${event.name}`\n            // Disable button if no tickets are left\n            ,\n            disabled: event.tickets <= 0,\n            children: event.tickets > 0 ? 'Buy Ticket' : 'Sold Out'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 29\n          }, this)]\n        }, event.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 9\n  }, this);\n}\n_s(App, \"4wVOCnnMCfGCbuWpKm2ll5ljMag=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useEffect","useState","useCallback","jsxDEV","_jsxDEV","App","_s","events","setEvents","message","setMessage","fetchEvents","fetch","then","res","json","data","catch","err","console","error","buyTicket","eventId","eventName","method","ok","Promise","reject","successMsg","alert","errorMsg","className","children","fileName","_jsxFileName","lineNumber","columnNumber","role","map","event","name","Date","date","toLocaleDateString","tickets","onClick","id","disabled","_c","$RefreshReg$"],"sources":["C:/Users/unkno/OneDrive/Documents/GitHub/3720_tigertix/frontend/src/App.js"],"sourcesContent":["import React, { useEffect, useState, useCallback } from 'react';\r\nimport './App.css';\r\n\r\nfunction App() {\r\n    const [events, setEvents] = useState([]);\r\n    const [message, setMessage] = useState(''); // For screen reader announcements\r\n\r\n    // useCallback to memoize the function so it's not recreated on every render\r\n    const fetchEvents = useCallback(() => {\r\n        // The frontend now fetches from the client service on port 6001\r\n        fetch('http://localhost:6001/api/events')\r\n            .then((res) => res.json())\r\n            .then((data) => setEvents(data))\r\n            .catch((err) => {\r\n                console.error(\"Failed to fetch events:\", err);\r\n                setMessage(\"Error: Could not load events from the server.\");\r\n            });\r\n    }, []);\r\n\r\n    // Fetch events on initial component mount\r\n    useEffect(() => {\r\n        fetchEvents();\r\n    }, [fetchEvents]);\r\n\r\n    const buyTicket = (eventId, eventName) => {\r\n        fetch(`http://localhost:6001/api/events/${eventId}/purchase`, {\r\n            method: 'POST',\r\n        })\r\n        .then(res => {\r\n            if (!res.ok) {\r\n                // If the server responds with an error (e.g., 400 for no tickets)\r\n                // we convert it to JSON to read the error message\r\n                return res.json().then(err => Promise.reject(err));\r\n            }\r\n            return res.json();\r\n        })\r\n        .then(data => {\r\n            // Announce success to screen readers via the live region\r\n            const successMsg = `Ticket purchased successfully for ${eventName}.`;\r\n            setMessage(successMsg);\r\n            alert(successMsg); // Visual confirmation for sighted users\r\n            fetchEvents(); // Refresh the list of events to show the new ticket count\r\n        })\r\n        .catch(err => {\r\n            console.error('Purchase error:', err);\r\n            // Announce failure and show an alert\r\n            const errorMsg = `Failed to purchase ticket for ${eventName}. Reason: ${err.error || 'Server error'}`;\r\n            setMessage(errorMsg);\r\n            alert(errorMsg);\r\n        });\r\n    };\r\n\r\n    return (\r\n        <div className=\"App\">\r\n            <header>\r\n                <h1>Clemson Campus Events</h1>\r\n            </header>\r\n            <main>\r\n                {/* This div is a \"live region\" for accessibility. Screen readers will announce changes to its content. */}\r\n                <div role=\"status\" aria-live=\"polite\" className=\"sr-only\">\r\n                    {message}\r\n                </div>\r\n                <ul>\r\n                    {events.map((event) => (\r\n                        <li key={event.id}>\r\n                            {event.name} - {new Date(event.date).toLocaleDateString()} - <strong>{event.tickets}</strong> tickets available\r\n                            <button \r\n                                onClick={() => buyTicket(event.id, event.name)}\r\n                                // Descriptive label for screen readers\r\n                                aria-label={`Buy one ticket for ${event.name}`}\r\n                                // Disable button if no tickets are left\r\n                                disabled={event.tickets <= 0}\r\n                            >\r\n                                {event.tickets > 0 ? 'Buy Ticket' : 'Sold Out'}\r\n                            </button>\r\n                        </li>\r\n                    ))}\r\n                </ul>\r\n            </main>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}